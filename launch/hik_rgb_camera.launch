<launch>

<arg name="ip_addr" default="192.168.1.64"/>
<arg name="user_name" default="admin"/>
<arg name="password" default="R00mie-03"/>
<arg name="port" default="8000"/>
<!-- Channel 1 -> RGB Camera     Channel 2 -> Thermal Camera-->
<arg name="channel" default="1"/>
<!--link_mode: 0-tcp, 1-udp, 2-multicast, 3-rtp, 4-rtp/rtsp, 5-rstp/http-->
<arg name="link_mode" default="0"/>


<arg name="image_width" default="1280"/>
<arg name="image_height" default="720"/>
<arg name="camera_frame_id" default="hik_camera"/>
<!--arg name="camera_name" default="hik_camera"/-->
<arg name="camera_name" default="hik_rgb_cam_ds2t"/>
<arg name="camera_info_url" default="file://$(find hikvision_ros)/cam_calib_params/hik_rgb_cam_ds2t.yaml"/>

<node pkg="hikvision_ros" type="hik_cam_node" name="hik_cam_node" output="screen">

    <!-- modify LD_LIBRARY_PATH for loading hikvision sdk -->
    <env name="LD_LIBRARY_PATH"
         value="$(env LD_LIBRARY_PATH):$(find hikvision_ros)/lib:$(find hikvision_ros)/lib/HCNetSDKCom"/>

    <param name="ip_addr" value="$(arg ip_addr)" />
    <param name="user_name" value="$(arg user_name)" />
    <param name="password" value="$(arg password)" />
    <param name="port" value="$(arg port)" />
    <param name="channel" value="$(arg channel)"/>
    <param name="link_mode" value="$(arg link_mode)"/>

    <param name="image_width" value="$(arg image_width)"/>
    <param name="image_height" value="$(arg image_height)"/>
    <param name="camera_frame_id" value="$(arg camera_frame_id)"/>
    <param name="camera_name" value="$(arg camera_name)"/>
    <param name="camera_info_url" value="$(arg camera_info_url)"/>

</node>

  <!-- Color rectified image -->
<node pkg="nodelet" type="nodelet" args="manager"
        name="hikvision_cameras_manager" output="screen"/>

<node pkg="nodelet" type="nodelet" name="rectify_color"
    args="load image_proc/rectify hikvision_cameras_manager --no-bond"
    respawn="false">
        
    <remap from="image_mono" to="hik_cam_node/$(arg camera_name)/image_raw" />
    <remap from="image_rect" to="hik_cam_node/$(arg camera_name)/image_rect_color" />
</node>


</launch>
